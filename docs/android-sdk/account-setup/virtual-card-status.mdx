---
title: "Virtual Card Status"
---

A virtual card transitions through several critical stages before it is ready for transactions. You can monitor these stages using the `CBPaymentStatus` object, which provides real-time information regarding the state of both the virtual card and its associated digital tokens.

## Card vs. Token Status

The process for creating a CoinBridge payment method involves two distinct flows that must be completed for a user to perform payments:

* **Virtual Card Issuing**: The process of issuing a unique virtual card for a specific user.
* **Virtual Card Provisioning**: The process of adding a digital "token" of that virtual card to the CoinBridge SDK wallet on a specific device.

A user may possess an **Active** virtual card but still require **Provisioning** to their specific mobile device before the Tap & Go experience is enabled.

---

## Understanding Status Values

The `CBPaymentStatus` object contains the following components to help you manage the user interface and journey:

### 1. Card Status (`CBCardStatus`)
This value indicates the status of the primary virtual card account. Note that naming conventions differ slightly by platform:
* **ACTIVE / active**: The virtual card is successfully enrolled and ready for service.
* **NOT_ACTIVE / notActive**: The card is suspended and cannot be used for any CoinBridge services. This typically occurs due to suspected fraud, unexpected user activity, or a customer request to block the service.

### 2. Token Status
This indicates whether the card has been successfully pushed to the device wallet. The parameter name and structure depend on your platform:
* **Android**: Access via `getProvisioningStatuses()`, which returns a map of `WalletType` and `TokenStatus`.
* **iOS**: Access via `provisioningStatuses`, which returns a dictionary of `[walletType: tokenStatus]`.

**Possible values for Token Status:**
* **ACTIVE / active**: The card is provisioned to the wallet, and the token is ready for use.
* **NONE / none**: The card has been issued but is not yet provisioned to the device wallet.
* **NOT_ACTIVE / notActive**: The card is provisioned, but the token is suspended. While the card account may be fine, the specific device link is restricted.

---

## Handling Suspensions

When the SDK reports a suspension, your application should provide clear instructions based on the suspension level:

* **If the Card is `NOT_ACTIVE` or `notActive`**: The user is completely restricted from utilizing CoinBridge services. We highly recommend displaying a prominent message prompting the user to contact customer support for investigation.
* **If a Token is `NOT_ACTIVE` or `notActive`**: Only the link to that specific device is affected.
    * **Android**: Inform the user that the service is restricted on the current device.
    * **iOS**: The user must manually remove the suspended token from their Apple Wallet before they can attempt to re-provision the card.

---

## Technical Notes

* **Status Updates**: The SDK notifies your application of the current status following successful initialization or whenever a state change occurs, such as after a card is provisioned or updated.
* **Device Context (iOS)**: The `CBPaymentStatus` includes a `walletType` parameter to differentiate between an iPhone (`deviceWallet`) and an Apple Watch (`watchWallet`).
* **Waiting for Card Details**: If you attempt to provision a card before the card information has fully arrived from the backend, the SDK will return the error `Card_Details_Not_Arrived`. In this case, you must wait for the updated status via the notification service before displaying the provisioning CTA.