---
title: "Add Card to Wallet (Provisioning)"
---

Provisioning is the process of pushing the digital card issued by CoinBridge into the SDK’s internal wallet. Once this is done, the card becomes **ACTIVE**, allowing the user to perform "Tap & Go" payments.

### 1. Prerequisites
Before you try to provision a card, ensure the user is in the correct state. You can check these by looking at the `userState` returned during [Initialization](/docs/android-sdk/sdk/installation/initialize):
* **Has Card**: Must be `TRUE`.
* **Card Status**: Must be `Active`.
* **Token Status**: Should be `NONE` (meaning it’s not on this device yet).

### 2. Implementation
Call the `provisionCard` method from your payment or wallet activity. This starts the secure handshake with the card schemes (Mastercard/Visa).

```java title="Provisioning Example"
CoinBridgeSDK.getInstance().provisionCard(activity, new OnCardProvisioningCallback() {
           @Override
           public void onRequestSuccess() {

           }

           @Override
           public void onError(CBError<CardProvisioningError> error) {

           }
       });
```

### 3. Handling Status Changes
Because tokenization happens in the background, `onRequestSuccess` only means the process started. You must listen for the `onPaymentMethodStatusChange` event via the **CBNotificationService** to know when the card is actually ready.

<Tip>
  Only show the **"Pay"** button or "Ready to Tap" UI once the provisioning status officially changes to **ACTIVE**.
</Tip>

## Hardware Readiness
Before a user taps their phone, use these `CBHelper` methods to make sure the phone's settings won't block the payment:

* **NFC Status**: Use `isNFCEnabled()` to check if NFC is on.
* **Payment Settings**: Use `isPayWithCurrentlyOpenAppEnabled()` to verify Android is set to pay with the app that is currently on the screen.

If these are off, you can use `launchNfcSettings()` to send the user directly to the Android settings menu to fix it.

## Mandatory Communications
To stay compliant with financial regulations, you must notify users about their card status via Email or SMS:

| Scenario | Trigger | Requirement |
| :--- | :--- | :--- |
| **Success** | Card is activated. | Send confirmation within 1 hour. |
| **Abandoned** | Flow started but not finished. | Follow up within 24 hours. |
| **Inactive** | Provisioned but not used. | If unused for 7 days, send a "Benefits" reminder. |

<Warning>
### Mandatory Logout
When a user logs out of your app, you **must** call `CoinBridgeSDK.getInstance().logout()`. This "unbinds" the user and cleans up their data. If you skip this, it can create "orphan" wallets that slow down the system and cause login errors for the user later.
</Warning>
