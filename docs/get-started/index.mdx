# How the CoinBridge Payment Process Works

While CoinBridge provides a bridge between digital assets and traditional retail, the basic payment process always follows the same sequence. This guide provides a step-by-step breakdown of the process and key elements involved, clarifying how payments flow when utilizing the CoinBridge SDKs and webhooks.

### The CoinBridge Payment Process
The payment process consists of four steps:
* Authenticate and initialize
* Issue a virtual card
* Provision to a digital wallet
* Create the payment

A successful payment leads to a completed transaction where digital assets are converted into usable currency at any shop worldwide based on the user's available funds.

The steps below explain each part of the process in detail.

---

### Step 1: Authenticate and initialize
Every payment in CoinBridge links to a verified user. The system uses a JSON Web Token (JWT) generated by your backend to establish a secure session. This ensures that only authorized users can access their digital asset balances.

When you authenticate the user and call the `init` method, CoinBridge generates a unique identifier for use in later steps. This initialization step also determines the user's current stateâ€”whether they already have a card or if they need to be routed to the issuance flow.

> **Note:** You will need the user's identification information for each subsequent step.

---

### Step 2: Issue a virtual card
To process a payment, you must first create a virtual card. This card connects the user to the global payment network and stores the rules for how their digital assets should be spent.

When you issue a card, CoinBridge synchronizes with your platform via webhooks. This allows you to validate the user's funds and apply risk policies before the card is activated. Depending on local regulations, you may collect identification details such as an SSN or National ID to improve the user's onboarding experience.

---

### Step 3: Provision to a digital wallet
A digital wallet token enhances payment security by protecting sensitive card information. This process, known as provisioning, enables the "Tap & Go" experience by placing the virtual card into the device's secure hardware.

To provision a card, the SDK facilitates the connection between:
* The user's identification
* The issued virtual card
* The selected mobile wallet (Apple Pay or Google Pay)

> **Info:** A wallet token is a secure, device-specific version of the card that prevents unauthorized reuse. It enhances security by ensuring the actual card details are never stored on your servers or exposed during transactions.

---

### Step 4: Create the payment
A payment represents a user's transaction at a Point-of-Sale (POS) terminal, consolidating all necessary order and funding details.

To process a payment, the user interacts with a physical terminal using NFC technology. The transaction must occur through a provisioned digital wallet and include:
* A connected user
* A valid wallet token for security
* A real-time balance authorization from your platform

The CoinBridge protocol organizes these transaction details, ensuring a clear and structured payment flow. This setup simplifies tracking and reconciliation for your backend.

---

### Step 5: Connect the webhooks
After creating the payment, CoinBridge will keep you informed about updates through webhooks. This allows you to update the user's balance and transaction history immediately. Additionally, you can integrate spending rules and risk checks into the authorization flow to prevent fraud and ensure a smooth transaction experience.