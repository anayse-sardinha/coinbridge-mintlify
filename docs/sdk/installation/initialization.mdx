---
title: "Initialization"
---


The Initialization method sets up the payment environment for the user. It determines the readiness of the user's payment method and retrieves current card statuses.

## Prerequisites

Before calling the initialization method, you must ensure the following:
* The `isAuthenticated` method must return **True**. If it returns **False**, you must complete the [SDK Authentication](./authentication) process first.
* Ensure the application has been granted all required permissions (e.g., NFC, internet).

## Implementation

For an optimal experience, it is strongly recommended to perform SDK initialization in the `onCreate()` method of your payment activity or view controller.

### Platform Implementation


Use the `init` method from the `CoinBridgeSDK` singleton:

```java
CoinBridgeSDK.getInstance().init(activity, new OnInitCallback() {
    @Override
    public void onInitComplete(boolean hasCard, CBPaymentStatus status) {
        // Handle successful initialization
        // hasCard: indicates if a card is already issued for this user
        // status: contains details like card status and provisioning state
    }

    @Override
    public void onError(CBError<InitError> error) {
        // Handle initialization failure
    }
});
```

Use the `initialize` method within the `CoinBridge` singleton class to synchronize the local environment with the backend:


```swift
CoinBridge.sharedInstance.initialize { cbInitCompletion in
    switch cbInitCompletion {
    case .initCompleted(let hasCard, let status):
        // Handle successful initialization 
        // hasCard: indicates if a card is already issued for this user 
        // status: contains details like card status and provisioning state
    case .onError(let error):
        // Handle initialization failure
    }
}
```

## Interpreting Results
Upon successful initialization, the SDK provides two key data points to guide your next steps:

### `hasCard` state
The `hasCard` boolean indicates the issuance status of the user's payment method: 

* **True**: A virtual card has already been issued for this user.
* **Action**: You can proceed to check the provisioning status to see if the device is ready for "Tap & Go" payments.
* **False**: No virtual card is assigned to this user.
* **Action**: You must guide the user through the `IssueCard` process to create their virtual payment method.

### `CBPaymentStatus` object
This object provides a real-time snapshot of the user's payment readiness:

* **`CBCardStatus`**: Indicates if the card is `ACTIVE` (available for use) or `NOT_ACTIVE` (suspended). 
* **`provisioningStatuses`**: A map/dictionary showing the status of tokens for available wallets. 
* **Wallet Types**: This includes the `deviceWallet` (smartphone) or `watchWallet` (paired Apple Watch).